@keyframes liquidBorder {
  0% {
    border-radius: 48% 52% 51% 49% / 51% 48% 52% 49%;
    transform: scale(1);
  }
  25% {
    border-radius: 51% 49% 48% 52% / 49% 51% 49% 51%;
    transform: scale(1.02);
  }
  50% {
    border-radius: 49% 51% 52% 48% / 52% 49% 51% 48%;
    transform: scale(1);
  }
  75% {
    border-radius: 52% 48% 49% 51% / 48% 52% 48% 52%;
    transform: scale(1.02);
  }
  100% {
    border-radius: 48% 52% 51% 49% / 51% 48% 52% 49%;
    transform: scale(1);
  }
}

.nav-link {
  position: relative;
  isolation: isolate;
  /* テキストの視認性を大幅に向上 */
  font-weight: 500;
  text-shadow: 
    0 0 1px rgba(0, 0, 0, 0.2),
    0 1px 2px rgba(0, 0, 0, 0.15),
    0 0 8px rgba(255, 255, 255, 0.5);
  letter-spacing: 0.02em;
}

.nav-link::before {
  content: '';
  position: absolute;
  inset: -8px -12px;
  background: 
    radial-gradient(
      200px circle at var(--x, 0) var(--y, 0),
      rgba(255, 130, 255, 0.35),    /* より透明なピンク */
      rgba(100, 210, 255, 0.35) 35%, /* より透明なブルー */
      rgba(255, 180, 100, 0.35) 65%, /* より透明なオレンジ */
      transparent 90%
    ),
    radial-gradient(
      160px circle at var(--x, 0) var(--y, 0),
      rgba(255, 90, 255, 0.3),     /* さらに透明なピンク */
      rgba(70, 195, 255, 0.3) 45%, /* さらに透明なブルー */
      transparent 75%
    );
  border-radius: 48% 52% 51% 49% / 51% 48% 52% 49%;
  opacity: 0;
  transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
              filter 0.5s ease;
  z-index: -1;
  filter: blur(3px) brightness(0.9) saturate(1.3);
  transform-origin: center;
  transform: scale(0.7);
  mix-blend-mode: screen;
}

.nav-link:hover::before,
.nav-link:focus::before,
.nav-link[data-active="true"]::before {
  opacity: 1;
  transform: scale(1);
  filter: blur(3px) brightness(1.2) saturate(1.5);
  animation: liquidBorder 6s ease-in-out infinite;
}

.nav-link::after {
  content: '';
  position: absolute;
  inset: -6px -10px;
  background: 
    radial-gradient(
      140px circle at var(--x, 0) var(--y, 0),
      rgba(255, 160, 255, 0.5),    /* より透明なパステルピンク */
      rgba(150, 220, 255, 0.5) 40%, /* より透明なパステルブルー */
      rgba(255, 200, 150, 0.5) 70%, /* より透明なパステルオレンジ */
      transparent 90%
    );
  border-radius: inherit;
  opacity: 0;
  transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
              filter 0.5s ease;
  z-index: -1;
  filter: blur(2px) brightness(0.9) saturate(1.3);
  transform-origin: center;
  transform: scale(0.7);
  mix-blend-mode: screen;
}

.nav-link:hover::after,
.nav-link:focus::after,
.nav-link[data-active="true"]::after {
  opacity: 1;
  transform: scale(1);
  filter: blur(1px) brightness(1.3) saturate(1.4);
  animation: liquidBorder 6s ease-in-out infinite reverse;
}

/* スマホ表示時のスタイル調整 */
@media (max-width: 768px) {
  .nav-link::before {
    inset: -6px -8px;
    background: 
      radial-gradient(
        120px circle at var(--x, 0) var(--y, 0),
        rgba(255, 130, 255, 0.35),
        rgba(100, 210, 255, 0.35) 35%,
        rgba(255, 180, 100, 0.35) 65%,
        transparent 90%
      ),
      radial-gradient(
        100px circle at var(--x, 0) var(--y, 0),
        rgba(255, 90, 255, 0.3),
        rgba(70, 195, 255, 0.3) 45%,
        transparent 75%
      );
  }

  .nav-link::after {
    inset: -4px -6px;
    background: 
      radial-gradient(
        80px circle at var(--x, 0) var(--y, 0),
        rgba(255, 160, 255, 0.5),
        rgba(150, 220, 255, 0.5) 40%,
        rgba(255, 200, 150, 0.5) 70%,
        transparent 90%
      );
  }
}